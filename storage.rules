rules_version = '2';

service firebase.storage {
  match /b/{bucket}/o {

    // --- Rules for Test Files (Uploaded by Employers) ---
    // Example path: /tradTest/EMPLOYER_ID_123/POST_ID_456/test.pdf
    match /tradTest/{employerId}/{postId}/{allPaths=**} {

      // ALLOW WRITE: An authenticated user can write a test file if their UID matches the employerId in the path.
      allow write: if request.auth != null && request.auth.uid == employerId;

      // ALLOW READ: Any authenticated user can read the test files. This is necessary
      // for candidates to be able to download the test instructions.
      allow read: if request.auth != null;
    }
  }
}
